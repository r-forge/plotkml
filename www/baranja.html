<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Baranja hill case study</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for baranja {plotKML}"><tr><td>baranja {plotKML}</td><td align="right">R Documentation</td></tr></table>

<h2>Baranja hill case study</h2>

<h3>Description</h3>

<p>Baranja hill is a 4 by 4 km large study area in the Baranja region, eastern Croatia (corresponds to a size of an aerial photograph). This data set has been extensively used to describe various DEM modelling and analysis steps (Hengl and Reuter, 2008; Hengl et al., 2010). <br>
<code>barxyz</code> is a <code>SpatialPointsDataFrame</code> object that contains 6370 observations of elevations (from field survey and digitized from the stereo images); <code>bargrid</code> contains <EM>observed</EM> probabilities of streams (digitized from the 1:5000 topo map); <code>barstr</code> contains 100 simulated stream networks (SpatialLines) using <code>barxyz</code> as input (see examples below).</p>


<h3>Usage</h3>

<pre>data(barxyz)</pre>


<h3>Note</h3>

<p> Consider using the 30~m resolution grid (see <code>bargrid</code>) to produce the output maps. 
</p>


<h3>Author(s)</h3>

<p> Tomislav Hengl (<a href="mailto:tom.hengl@wur.nl">tom.hengl@wur.nl</a>) </p>


<h3>References</h3>

<p>

<ul>
<li> Hengl, T., Reuter, H.I. (eds), (2008) <a href="http://geomorphometry.org/book">Geomorphometry: Concepts, Software, Applications</a>. Developments in Soil Science, vol. 33, Elsevier, 772 p.
</li>
<li>Hengl, T., Heuvelink, G. B. M., van Loon, E. E., (2010) <a href="http://dx.doi.org/10.5194/hess-14-1153-2010">On the uncertainty of stream networks derived from elevation data: the error propagation approach</a>. Hydrology and Earth System Sciences, 14:1153-1165.
</li>
<li><a href="http://geomorphometry.org/content/baranja-hill">http://geomorphometry.org/content/baranja-hill</a>
</ul>

</p>


<h3>Examples</h3>

<pre>
library(gstat)
data(barxyz)
data(bargrid)
data(barstr)
coordinates(bargrid) &lt;- ~x+y
gridded(bargrid) &lt;- TRUE
proj4string(bargrid) &lt;- barxyz@proj4string
bargrid@grid
## Not run: 
spplot(bargrid[1], sp.layout=list("sp.points", barxyz, col="black", pch="+"))
## Deriving stream networks using geostatistical simulations:
Z.ovgm &lt;- vgm(psill=1831, model="Mat", range=1051, nugget=0, kappa=1.2)
vt.gt &lt;- gstat(id=c("Z"), formula=Z~1, data=barxyz, model=Z.ovgm, nmax=30)
# geostatistical simulations:
DEM.sim &lt;- predict.gstat(vt.gt, bargrid, nsim=N.sim, debug.level=-1)
fullgrid(DEM.sim) &lt;- TRUE
stream.list &lt;- list(rep(NA, N.sim))
# derive stream networks in SAGA GIS:
for (i in 1:N.sim) {
  writeGDAL(DEM.sim[i], paste("DEM", i, ".sdat", sep=""), "SAGA", mvFlag = -99999)
  # filter the spurious sinks:
  rsaga.geoprocessor(lib="ta_preprocessor", module=2, param=list(DEM=paste("DEM", i, ".sgrd", sep=""), DEM_PREPROC="DEMflt.sgrd", METHOD=1), show.output.on.console=FALSE)
  # extract the channel network:
  rsaga.geoprocessor(lib="ta_channels", module=0, param=list(ELEVATION="DEMflt.sgrd", CHNLNTWRK=paste("channels", i, ".sgrd", sep=""), CHNLROUTE="channel_route.sgrd", SHAPES="channels.shp", INIT_GRID="DEMflt.sgrd", DIV_CELLS=3, MINLEN=40), show.output.on.console=FALSE)
  stream.list[[i]] &lt;- readOGR("channels.shp", "channels", verbose=FALSE)
  proj4string(stream.list[[i]]) &lt;- barxyz@proj4string
}
# plot all derived streams at top of each other:
stream.plot &lt;- as.list(rep(NA, N.sim))
for(i in 1:N.sim){
  streams.plot[[i]] &lt;- list("sp.lines", stream.list[[i]])
}
spplot(DEM.sim[1], col.regions=grey(seq(0.4,1,0.025)), scales=list(draw=T), sp.layout=streams.plot)

## End(Not run)
</pre>

<hr><div align="center">[Package <em>plotKML</em> version 0.1-2 <a href="00Index.html">Index</a>]</div>
</body></html>
